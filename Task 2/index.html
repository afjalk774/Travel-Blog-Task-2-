<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Travel blog featuring hidden gems, culinary adventures, and cultural experiences around the world">
    <meta name="keywords" content="travel, food, culture, adventure, photography, backpacking">
    <meta name="author" content="Travel Blog Team">
    <meta property="og:title" content="Travel Blog - Discover the World">
    <meta property="og:description" content="Explore hidden destinations, local cuisines, and cultural experiences">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://travelblog.example.com">
    <meta property="og:image" content="https://travelblog.example.com/images/social-share.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <title>Travel Blog | Discover Hidden Gems Around the World</title>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
    </script>
    <style>
        /* CSS Variables for Theming */
        :root {
            --bg-color: #dde6fc;
            --header-bg: #fcf5f8;
            --text-color: #333;
            --link-color: #010104;
            --link-hover-color: #5649c0;
            --post-bg: #fff;
            --button-bg: #6c5ce7;
            --button-hover-bg: #5649c0;
            --meta-color: #7f8c8d;
            --footer-bg: #2d3436;
            --footer-text: #dfe6e9;
            --footer-heading: #a29bfe;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --loading-color: #f0f0f0;
            --loading-highlight: #e0e0e0;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --header-bg: #2d3436;
            --text-color: #e0e0e0;
            --link-color: #a29bfe;
            --link-hover-color: #81ecec;
            --post-bg: #2d3436;
            --button-bg: #0984e3;
            --button-hover-bg: #0652dd;
            --meta-color: #a0a0a0;
            --footer-bg: #121212;
            --footer-text: #b0b0b0;
            --footer-heading: #81ecec;
            --shadow-color: rgba(255, 255, 255, 0.1);
            --loading-color: #2a2a2a;
            --loading-highlight: #333;
        }

        /* Reset and Base Styles */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
        }
        a { text-decoration: none; color: var(--link-color); }
        a:hover { color: var(--link-hover-color); }
        img { max-width: 100%; height: auto; display: block; }
        .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 15px; }

        /* Loading Animation */
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .loading {
            background: linear-gradient(90deg, var(--loading-color), var(--loading-highlight), var(--loading-color));
            background-size: 200% 100%;
            animation: loading 1.5s infinite linear;
            border-radius: 4px;
            color: transparent !important;
        }
        .loading-block { height: 20px; margin-bottom: 10px; }
        .loading-img { width: 100%; height: 200px; margin-bottom: 15px; }

        /* Header */
        header {
            background-color: var(--header-bg);
            box-shadow: 0 2px 5px var(--shadow-color);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        .logo { font-size: 24px; font-weight: bold; color: #02000ce2; }
        .theme-toggle, .nav-toggle {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-color);
            margin-left: 10px;
        }
        nav ul { display: flex; list-style: none; }
        nav ul li { margin-left: 20px; }
        nav ul li a { font-weight: 500; transition: color 0.3s; }

        /* Main Layout */
        .main-layout { display: flex; margin: 20px 0; gap: 20px; }
        .main-content { flex: 3; position: relative; min-height: 300px; }
        .blog-post {
            background-color: var(--post-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px var(--shadow-color);
            margin-bottom: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .blog-post:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 10px var(--shadow-color);
        }
        .blog-post-img { width: 100%; height: 200px; object-fit: cover; object-position: center; }
        .blog-post-content { padding: 20px; }
        .blog-post h2 { margin-bottom: 10px; color: var(--text-color); }
        .blog-post-meta { color: var(--meta-color); font-size: 14px; margin-bottom: 15px; }
        .blog-post p { margin-bottom: 15px; }
        .read-more {
            display: inline-block;
            background-color: var(--button-bg);
            color: #fff;
            padding: 8px 15px;
            border-radius: 4px;
            font-weight: 500;
            transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
        }
        .read-more:hover {
            background-color: var(--button-hover-bg);
            transform: scale(1.05);
            box-shadow: 0 2px 5px var(--shadow-color);
        }

        /* Sidebar */
        .sidebar { flex: 1; }
        .sidebar.hidden { display: none; }
        .sidebar-widget {
            background-color: var(--post-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px var(--shadow-color);
        }
        .sidebar-widget h3 {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            color: var(--text-color);
        }
        .search-bar {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 16px;
        }
        .categories ul, .recent-posts ul { list-style: none; }
        .categories li, .recent-posts li {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .categories li:last-child, .recent-posts li:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        /* Load More Button */
        .load-more {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: var(--button-bg);
            color: #fff;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
        }
        .load-more:hover {
            background-color: var(--button-hover-bg);
            transform: scale(1.05);
            box-shadow: 0 2px 5px var(--shadow-color);
        }
        .load-more.loading { position: relative; color: transparent; }

        /* Error Message */
        .error-message {
            background-color: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            border-left: 4px solid #c62828;
        }
        [data-theme="dark"] .error-message {
            background-color: #3a1a1a;
            color: #ff8a80;
            border-left-color: #ff8a80;
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--button-bg);
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            display: none;
            transition: background-color 0.3s, transform 0.2s;
            z-index: 99;
        }
        .back-to-top:hover {
            background-color: var(--button-hover-bg);
            transform: scale(1.1);
        }
        .back-to-top.visible { display: block; }

        /* Footer */
        footer {
            background-color: var(--footer-bg);
            color: var(--footer-text);
            padding: 40px 0;
        }
        .footer-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        .footer-column {
            flex: 1;
            min-width: 150px;
            margin-bottom: 20px;
            padding-right: 20px;
        }
        .footer-column h3 { margin-bottom: 15px; color: var(--footer-heading); }
        .footer-column ul { list-style: none; }
        .footer-column li { margin-bottom: 10px; }
        .footer-column a { color: var(--footer-text); transition: color 0.3s; }
        .footer-column a:hover { color: var(--footer-heading); }
        .copyright {
            text-align: center;
            padding-top: 20px;
            margin-top: 20px;
            border-top: 1px solid #636e72;
        }

        /* Responsive Design */
        @media screen and (max-width: 768px) {
            .main-layout { flex-direction: column; }
            .nav-toggle { display: block; }
            nav {
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: var(--post-bg);
                box-shadow: 0 2px 5px var(--shadow-color);
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-out;
            }
            nav.active { max-height: none; }
            nav ul { flex-direction: column; padding: 20px; }
            nav ul li { margin: 0 0 15px 0; }
            nav ul li:last-child { margin-bottom: 0; }
            .footer-column { flex: 100%; margin-bottom: 30px; }
        }
        @media screen and (max-width: 480px) {
            .blog-post-img { height: 150px; }
            .header-container { padding: 10px 0; }
            .logo { font-size: 20px; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">RoamCollective</div>
            <div>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">ðŸŒ™</button>
                <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation" aria-expanded="false">â˜°</button>
            </div>
            <nav id="mainNav">
                <ul>
                    <li><a href="#" aria-current="page">Home</a></li>
                    <li><a href="#">Travel</a></li>
                    <li><a href="#">Food</a></li>
                    <li><a href="#">Culture</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <div class="container main-layout">
        <!-- Blog Posts -->
        <main class="main-content" id="blogPosts">
            <!-- Loading skeleton -->
            <div id="loadingPosts">
                <article class="blog-post">
                    <div class="loading loading-img"></div>
                    <div class="blog-post-content">
                        <h2 class="loading loading-block" style="width: 80%"></h2>
                        <div class="blog-post-meta loading loading-block" style="width: 60%"></div>
                        <p class="loading loading-block" style="width: 100%"></p>
                        <p class="loading loading-block" style="width: 90%"></p>
                        <div class="loading loading-block" style="width: 30%; height: 36px;"></div>
                    </div>
                </article>
                <article class="blog-post">
                    <div class="loading loading-img"></div>
                    <div class="blog-post-content">
                        <h2 class="loading loading-block" style="width: 80%"></h2>
                        <div class="blog-post-meta loading loading-block" style="width: 60%"></div>
                        <p class="loading loading-block" style="width: 100%"></p>
                        <p class="loading loading-block" style="width: 90%"></p>
                        <div class="loading loading-block" style="width: 30%; height: 36px;"></div>
                    </div>
                </article>
            </div>
            <!-- Error message container -->
            <div id="errorContainer" style="display: none;"></div>
        </main>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-widget about">
                <h3>About Blog</h3>
                <p>Welcome to our travel blog! We share tips and stories to inspire your next adventure.</p>
            </div>
            <div class="sidebar-widget search">
                <h3>Search Posts</h3>
                <input type="text" id="searchInput" class="search-bar" placeholder="Search blog posts...">
            </div>
            <div class="sidebar-widget categories">
                <h3>Categories</h3>
                <ul>
                    <li><a href="#">Travel (15)</a></li>
                    <li><a href="#">Food (8)</a></li>
                    <li><a href="#">Culture (12)</a></li>
                    <li><a href="#">Adventure (6)</a></li>
                    <li><a href="#">Photography (4)</a></li>
                </ul>
            </div>
            <div class="sidebar-widget recent-posts">
                <h3>Recent Posts</h3>
                <ul>
                    <li><a href="#">Top 10 Mountain Destinations for 2025</a></li>
                    <li><a href="#">How to Pack Light for a Long Trip</a></li>
                    <li><a href="#">Best Street Foods in Southeast Asia</a></li>
                    <li><a href="#">Budget Travel Guide: Europe Edition</a></li>
                </ul>
            </div>
            <div class="sidebar-widget">
                <h3>Toggle Sidebar</h3>
                <button id="toggleSidebar" class="read-more">Hide Sidebar</button>
            </div>
        </aside>
    </div>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">â†‘</button>

    <!-- Footer -->
    <footer>
        <div class="container footer-container">
            <div class="footer-column">
                <h3>About Us</h3>
                <p>We are passionate travelers sharing our experiences and insights from around the globe.</p>
            </div>
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Categories</h3>
                <ul>
                    <li><a href="#">Travel</a></li>
                    <li><a href="#">Food</a></li>
                    <li><a href="#">Culture</a></li>
                    <li><a href="#">Adventure</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Connect With Us</h3>
                <ul>
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">Pinterest</a></li>
                </ul>
            </div>
        </div>
        <div class="container copyright">
            <p>Â© 2025 RoamCollective. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Blog Post Data - Corrected
        const posts = [
            {
                id: 1,
                title: "Exploring the Hidden Beaches of Bali",
                image: "https://www.agoda.com/wp-content/uploads/2024/12/Bali-featured.jpg",
                alt: "Hidden beach in Bali with turquoise water and palm trees",
                author: "Sarah Johnson",
                date: "May 10, 2025",
                category: "Travel",
                excerpt: "Bali is known for its popular beaches like Kuta and Seminyak, but there are many hidden gems waiting to be discovered.",
                content: `<p>Bali's famous beaches attract millions of visitors each year, but the island's true beauty lies in its secluded coastal spots. After living in Bali for two years, I've discovered five breathtaking beaches that most tourists never see.</p>
                <h3>1. Green Bowl Beach</h3>
                <p>Located near Uluwatu, this beach requires descending 300 steps but rewards you with pristine white sand and excellent surf. The name comes from the cave that resembles a green bowl at low tide.</p>
                <h3>2. Bias Tugel Beach</h3>
                <p>Near Padang Bai, this pocket-sized paradise offers crystal clear water perfect for snorkeling. Arrive early to enjoy it before the day-trippers from nearby islands arrive.</p>
                <h3>3. Nyang Nyang Beach</h3>
                <p>This 1.5km stretch of untouched sand requires a 30-minute hike but offers complete solitude. The cliffside views on the way down are worth the effort alone.</p>
                <h3>4. Amed's Secret Beach</h3>
                <p>While Amed is known for diving, few visitors explore the small coves east of the main strip. These volcanic black sand beaches offer incredible sunset views.</p>
                <h3>5. Pasir Putih Beach</h3>
                <p>Also called Virgin Beach, this east Bali gem has soft white sand and calm waters. Local warungs serve fresh seafood right on the beach.</p>
                <p>To make the most of these hidden beaches, visit on weekdays, bring your own supplies, and respect the local environment. Many of these spots don't have facilities, so come prepared with water, snacks, and sun protection.</p>`,
                readTime: "8 min read"
            },
            {
                id: 2,
                title: "A Culinary Tour Through Tokyo's Street Food",
                image: "https://www.willflyforfood.net/wp-content/uploads/2020/01/minatoya3.jpg.webp",
                alt: "Tokyo street food stall with various skewers and snacks",
                author: "Michael Chen",
                date: "May 8, 2025",
                category: "Food",
                excerpt: "Tokyo's vibrant street food scene is a paradise for food lovers. From savory takoyaki to sweet taiyaki, there's so much to try.",
                content: `<p>Tokyo's street food culture blends traditional Japanese flavors with modern twists. After three weeks of eating my way through the city, here are the must-try street foods and where to find them.</p>
                <h3>1. Takoyaki in Shinjuku</h3>
                <p>These octopus-filled dough balls are crispy outside and creamy inside. The best spot is a tiny stall near Shinjuku Station that's been operating for 40 years.</p>
                <h3>2. Taiyaki in Asakusa</h3>
                <p>Fish-shaped cakes filled with red bean paste or custard. The stand outside Sensoji Temple makes them fresh all day with a perfect crispy exterior.</p>
                <h3>3. Yakitori in Omoide Yokocho</h3>
                <p>This narrow alley in Shinjuku comes alive at night with tiny yakitori joints. Try the tsukune (chicken meatballs) with raw egg yolk.</p>
                <h3>4. Okonomiyaki in Tsukishima</h3>
                <p>The "Monja Street" area specializes in this savory pancake. Cook it yourself on the hotplate at your table for the full experience.</p>
                <h3>5. Melon Pan in Harajuku</h3>
                <p>Despite the name, this sweet bread contains no melon. The best versions come from small bakeries in the backstreets of Harajuku.</p>
                <p>Pro tip: Many street food vendors only accept cash, so always carry yen. Also, don't walk while eating - it's considered rude in Japan. Find a spot to stand and enjoy your food properly.</p>`,
                readTime: "6 min read"
            },
            {
                id: 3,
                title: "Ancient Temples of Cambodia: Beyond Angkor Wat",
                image: "https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                alt: "Ancient Cambodian temple ruins covered in jungle",
                author: "Priya Patel",
                date: "May 5, 2025",
                category: "Culture",
                excerpt: "While Angkor Wat is Cambodia's crown jewel, the country is home to many other lesser-known yet magnificent temples.",
                content: `<p>Most visitors to Cambodia focus solely on Angkor Wat, but the country has dozens of other incredible temple complexes that offer equally stunning architecture without the crowds.</p>
                <h3>1. Beng Mealea</h3>
                <p>This sprawling jungle temple 40km from Siem Reap looks like how early explorers found Angkor - completely overtaken by nature. You can climb over collapsed walls and through root-choked corridors.</p>
                <h3>2. Banteay Chhmar</h3>
                <p>One of Cambodia's most important yet least visited temple complexes. The remote location means you'll often have the massive site to yourself.</p>
                <h3>3. Koh Ker</h3>
                <p>Briefly the capital of the Khmer empire, this site features a seven-tiered pyramid temple that you can climb for panoramic jungle views.</p>
                <h3>4. Preah Vihear</h3>
                <p>Perched dramatically on a cliff overlooking Thailand, this UNESCO site has some of the most spectacular temple architecture in Cambodia.</p>
                <h3>5. Sambor Prei Kuk</h3>
                <p>Predating Angkor by 600 years, these are some of the oldest temples in Cambodia, with unique octagonal towers and intricate carvings.</p>
                <p>When visiting these remote temples, hire a local guide - they'll share stories you won't find in guidebooks. Also consider visiting during the wet season (May-October) when the temples are at their most lush and tourist numbers are lowest.</p>`,
                readTime: "7 min read"
            },
            {
                id: 4,
                title: "Hiking the Inca Trail to Machu Picchu",
                image: "https://images.unsplash.com/photo-1526397751294-331021109fbd?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                alt: "Inca Trail leading to Machu Picchu with mountain views",
                author: "Carlos Mendez",
                date: "April 28, 2025",
                category: "Adventure",
                excerpt: "The classic 4-day trek to Machu Picchu is challenging but rewarding. Here's what you need to know before you go.",
                content: `<p>The Inca Trail is one of the world's most famous hikes, combining stunning Andean scenery with fascinating archaeological sites. I completed the trek last month and want to share my experience.</p>
                <h3>Preparation</h3>
                <p>You'll need to book months in advance as permits are limited. Physical preparation is key - train with hikes carrying a pack. Altitude sickness is a real concern, so arrive in Cusco 2-3 days early to acclimatize.</p>
                <h3>Day-by-Day Experience</h3>
                <p><strong>Day 1:</strong> Easy 12km warm-up through the Sacred Valley with views of Veronica Mountain.</p>
                <p><strong>Day 2:</strong> The hardest day - 16km including the 4,215m Dead Woman's Pass. Take it slow and drink plenty of water.</p>
                <p><strong>Day 3:</strong> Most scenic day passing multiple ruins including Phuyupatamarca with its amazing views.</p>
                <p><strong>Day 4:</strong> Early morning arrival at the Sun Gate for sunrise over Machu Picchu.</p>
                <h3>What to Pack</h3>
                <p>Layers are essential as temperatures vary widely. Bring quality hiking boots, a warm sleeping bag, rain gear, and plenty of sunscreen. Our porters carried most gear, but you'll need a daypack with water, snacks, and essentials.</p>
                <p>The trail is challenging but absolutely worth it. The combination of natural beauty, ancient ruins, and the final reveal of Machu Picchu makes this one of the most rewarding experiences of my life.</p>`,
                readTime: "9 min read"
            },
            {
                id: 5,
                title: "Photographing the Northern Lights in Iceland",
                image: "https://images.unsplash.com/photo-1518631081464-187cd92f01ef?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                alt: "Northern lights over Icelandic landscape",
                author: "Emma Wilson",
                date: "April 22, 2025",
                category: "Photography",
                excerpt: "Capturing the aurora borealis requires preparation and patience. Here are my tips after two winters photographing in Iceland.",
                content: `<p>The northern lights are one of nature's most spectacular displays, and Iceland offers some of the best viewing opportunities. After multiple trips, I've learned what it takes to get great photos.</p>
                <h3>When to Go</h3>
                <p>The best time is September to March when nights are longest. You need clear, dark skies - check aurora forecasts and cloud cover predictions. Solar activity peaks in 11-year cycles, with the next maximum due in 2026.</p>
                <h3>Where to Shoot</h3>
                <p>Some of my favorite spots:</p>
                <ul>
                    <li><strong>Kirkjufell:</strong> This iconic mountain makes a perfect foreground</li>
                    <li><strong>JÃ¶kulsÃ¡rlÃ³n:</strong> Aurora reflections on the glacier lagoon are magical</li>
                    <li><strong>Ãžingvellir:</strong> Historic site with interesting rock formations</li>
                </ul>
                <h3>Camera Settings</h3>
                <p>Use a DSLR or mirrorless camera with manual controls:</p>
                <ul>
                    <li>Wide-angle lens (14-24mm) with fast aperture (f/2.8 or wider)</li>
                    <li>ISO 1600-3200 (higher for faint displays)</li>
                    <li>Shutter speed 5-15 seconds (longer for weaker auroras)</li>
                    <li>Manual focus set to infinity (check with test shots)</li>
                </ul>
                <h3>Other Tips</h3>
                <p>Dress warmly - you'll be standing still for hours in freezing temperatures. Bring spare batteries (they drain fast in the cold) and a sturdy tripod. Consider a headlamp with red light to preserve night vision.</p>
                <p>Remember that no photo can truly capture the experience of seeing the lights dance overhead. Put the camera down sometimes and just enjoy the show.</p>`,
                readTime: "7 min read"
            }
        ];

        // DOM Elements
        const blogPostsEl = document.getElementById('blogPosts');
        const loadingPostsEl = document.getElementById('loadingPosts');
        const errorContainerEl = document.getElementById('errorContainer');
        const searchInput = document.getElementById('searchInput');
        const navToggle = document.getElementById('navToggle');
        const mainNav = document.getElementById('mainNav');
        const toggleSidebarBtn = document.getElementById('toggleSidebar');
        const sidebar = document.getElementById('sidebar');
        const themeToggle = document.getElementById('themeToggle');
        const backToTopBtn = document.getElementById('backToTop');
        const loadMoreBtn = document.createElement('button');
        loadMoreBtn.id = 'loadMore';
        loadMoreBtn.className = 'load-more';
        loadMoreBtn.textContent = 'Load More';
        document.querySelector('.main-content').appendChild(loadMoreBtn);

        // State
        let visiblePosts = 2;
        const postsPerPage = 2;
        let currentPosts = [];
        let isLoading = false;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                try {
                    currentPosts = [...posts];
                    renderPosts(currentPosts.slice(0, visiblePosts));
                    loadingPostsEl.style.display = 'none';
                } catch (error) {
                    showError("Failed to load posts. Please try again later.");
                    console.error("Error loading posts:", error);
                }
            }, 1000);
            setupEventListeners();
        });

        function setupEventListeners() {
            // Search functionality
            searchInput.addEventListener('input', debounce(function() {
                const query = this.value.toLowerCase();
                visiblePosts = postsPerPage;
                try {
                    if (query) {
                        const filteredPosts = posts.filter(post =>
                            post.title.toLowerCase().includes(query) ||
                            post.excerpt.toLowerCase().includes(query) ||
                            post.content.toLowerCase().includes(query) ||
                            post.category.toLowerCase().includes(query)
                        );
                        currentPosts = filteredPosts;
                        renderPosts(currentPosts.slice(0, visiblePosts));
                    } else {
                        currentPosts = [...posts];
                        renderPosts(currentPosts.slice(0, visiblePosts));
                    }
                } catch (error) {
                    showError("Error searching posts. Please try again.");
                    console.error("Search error:", error);
                }
            }, 300));

            // Load More functionality
            loadMoreBtn.addEventListener('click', function() {
                if (isLoading) return;
                isLoading = true;
                loadMoreBtn.classList.add('loading');
                setTimeout(() => {
                    try {
                        visiblePosts += postsPerPage;
                        const postsToShow = searchInput.value
                            ? currentPosts.slice(0, visiblePosts)
                            : posts.slice(0, visiblePosts);
                        renderPosts(postsToShow, true);
                        isLoading = false;
                        loadMoreBtn.classList.remove('loading');
                    } catch (error) {
                        showError("Failed to load more posts. Please try again.");
                        console.error("Load more error:", error);
                        isLoading = false;
                        loadMoreBtn.classList.remove('loading');
                    }
                }, 800);
            });

            // Toggle Navigation Menu
            navToggle.addEventListener('click', function() {
                const isExpanded = mainNav.classList.toggle('active');
                navToggle.setAttribute('aria-expanded', isExpanded);
            });

            // Close Menu When Clicking Outside
            document.addEventListener('click', function(event) {
                const isClickInsideNav = mainNav.contains(event.target);
                const isClickOnToggle = navToggle.contains(event.target);
                if (!isClickInsideNav && !isClickOnToggle && mainNav.classList.contains('active')) {
                    mainNav.classList.remove('active');
                    navToggle.setAttribute('aria-expanded', false);
                }
            });

            // Toggle Sidebar
            toggleSidebarBtn.addEventListener('click', function() {
                sidebar.classList.toggle('hidden');
                toggleSidebarBtn.textContent = sidebar.classList.contains('hidden') ? 'Show Sidebar' : 'Hide Sidebar';
            });

            // Dark Mode Toggle
            themeToggle.addEventListener('click', function() {
                const newTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                themeToggle.textContent = newTheme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
            });

            // Back to Top Button
            window.addEventListener('scroll', function() {
                if (window.scrollY > 300) {
                    backToTopBtn.classList.add('visible');
                } else {
                    backToTopBtn.classList.remove('visible');
                }
            });
            backToTopBtn.addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // Handle post clicks for single post view
            blogPostsEl.addEventListener('click', function(e) {
                if (e.target.classList.contains('read-more') || e.target.closest('.read-more')) {
                    e.preventDefault();
                    const postElement = e.target.closest('.blog-post');
                    const postId = postElement ? parseInt(postElement.dataset.id) : null;
                    if (postId) {
                        showSinglePost(postId);
                    }
                }
            });
        }

        function renderPosts(postsToRender, append = false) {
            if (!postsToRender.length && !append) {
                blogPostsEl.innerHTML = '<p class="error-message">No posts found matching your search.</p>';
                loadMoreBtn.style.display = 'none';
                return;
            }
            if (!append) {
                blogPostsEl.innerHTML = '';
            }
            postsToRender.forEach(post => {
                const article = document.createElement('article');
                article.className = 'blog-post';
                article.dataset.id = post.id;
                article.innerHTML = `
                    <img src="${post.image}" alt="${post.alt}" class="blog-post-img" loading="lazy">
                    <div class="blog-post-content">
                        <h2>${post.title}</h2>
                        <div class="blog-post-meta">Posted by ${post.author} | ${post.date} | ${post.category} | ${post.readTime}</div>
                        <p>${post.excerpt}</p>
                        <a href="#" class="read-more">Read More</a>
                    </div>
                `;
                blogPostsEl.appendChild(article);
            });
            updateLoadMoreButton();
        }

        function showSinglePost(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) {
                showError("Post not found.");
                return;
            }
            blogPostsEl.innerHTML = `
                <article class="blog-post" data-id="${post.id}">
                    <img src="${post.image}" alt="${post.alt}" class="blog-post-img">
                    <div class="blog-post-content">
                        <h2>${post.title}</h2>
                        <div class="blog-post-meta">Posted by ${post.author} | ${post.date} | ${post.category} | ${post.readTime}</div>
                        ${post.content}
                        <button id="backToList" class="read-more">Back to All Posts</button>
                    </div>
                </article>
            `;
            document.getElementById('backToList').addEventListener('click', function(e) {
                e.preventDefault();
                renderPosts(currentPosts.slice(0, visiblePosts));
            });
            loadMoreBtn.style.display = 'none';
        }

        function updateLoadMoreButton() {
            if (visiblePosts >= currentPosts.length || currentPosts.length <= postsPerPage) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'block';
            }
        }

        function showError(message) {
            errorContainerEl.style.display = 'block';
            errorContainerEl.innerHTML = `<div class="error-message">${message}</div>`;
            loadingPostsEl.style.display = 'none';
        }

        function debounce(func, wait) {
            let timeout;
            return function() {
                const context = this, args = arguments;
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(context, args), wait);
            };
        }

        // Check for saved theme preference
        const currentTheme = localStorage.getItem('theme') || 'light';
        if (currentTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            themeToggle.textContent = 'â˜€ï¸';
        }

        // Register Service Worker for offline capability
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').then(registration => {
                    console.log('ServiceWorker registration successful');
                }).catch(err => {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>

    <!-- Service Worker Script (for demo; in production, use a separate sw.js file) -->
    <script>
        // This would typically be in a separate sw.js file
        const CACHE_NAME = 'travel-blog-v1';
        const urlsToCache = [
            '/',
            '/index.html',
            '/styles/main.css',
            '/scripts/main.js',
            'https://images.unsplash.com/photo-1518544866330-95b5af6d2367?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'https://images.unsplash.com/photo-1519817650390-64a93db51149?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80'
        ];

        if ('serviceWorker' in navigator) {
            // Only register service worker if not already registered
            navigator.serviceWorker.register('/sw.js').catch(() => {});
        }

        // The following is for demonstration only; in production, this code should be in sw.js
        if (typeof self !== 'undefined' && self.addEventListener) {
            self.addEventListener('install', event => {
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then(cache => cache.addAll(urlsToCache))
                );
            });

            self.addEventListener('fetch', event => {
                event.respondWith(
                    caches.match(event.request)
                        .then(response => response || fetch(event.request))
                );
            });

            self.addEventListener('activate', event => {
                const cacheWhitelist = [CACHE_NAME];
                event.waitUntil(
                    caches.keys().then(cacheNames => {
                        return Promise.all(
                            cacheNames.map(cacheName => {
                                if (!cacheWhitelist.includes(cacheName)) {
                                    return caches.delete(cacheName);
                                }
                            })
                        );
                    })
                );
            });
        }
    </script>
</body>
</html>